{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction PersonnelPageComponent_th_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const qual_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(qual_r2);\n  }\n}\nfunction PersonnelPageComponent_tr_12_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const org_r7 = ctx.$implicit;\n    const person_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", org_r7);\n    i0.ɵɵproperty(\"selected\", person_r3.assigned_org == org_r7);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(org_r7);\n  }\n}\nfunction PersonnelPageComponent_tr_12_td_8_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const qual_opt_r12 = ctx.$implicit;\n    const qual_idx_r10 = i0.ɵɵnextContext().index;\n    const person_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", qual_opt_r12);\n    i0.ɵɵproperty(\"selected\", person_r3.quals[qual_idx_r10] == qual_opt_r12);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(qual_opt_r12);\n  }\n}\nfunction PersonnelPageComponent_tr_12_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19)(1, \"span\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 8);\n    i0.ɵɵtemplate(4, PersonnelPageComponent_tr_12_td_8_option_4_Template, 2, 3, \"option\", 9);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const qual_idx_r10 = ctx.index;\n    const ctx_r15 = i0.ɵɵnextContext();\n    const person_idx_r4 = ctx_r15.index;\n    const person_r3 = ctx_r15.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r6.isEditable[person_idx_r4] ? \"d-none\" : \"d-block\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(person_r3.quals[qual_idx_r10]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r6.isEditable[person_idx_r4] ? \"d-block\" : \"d-none\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.qual_options);\n  }\n}\nfunction PersonnelPageComponent_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 5)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 6)(4, \"span\", 7);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"select\", 8);\n    i0.ɵɵtemplate(7, PersonnelPageComponent_tr_12_option_7_Template, 2, 3, \"option\", 9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(8, PersonnelPageComponent_tr_12_td_8_Template, 5, 4, \"td\", 10);\n    i0.ɵɵelementStart(9, \"td\")(10, \"span\", 7)(11, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function PersonnelPageComponent_tr_12_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const person_idx_r4 = restoredCtx.index;\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.onEdit(person_idx_r4));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(12, \"svg\", 12);\n    i0.ɵɵelement(13, \"path\", 13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(14, \"button\", 14);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(15, \"svg\", 15);\n    i0.ɵɵelement(16, \"path\", 16);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(17, \"span\", 7)(18, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function PersonnelPageComponent_tr_12_Template_button_click_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const person_idx_r4 = restoredCtx.index;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.onSave(person_idx_r4));\n    });\n    i0.ɵɵtext(19, \"Save\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const person_r3 = ctx.$implicit;\n    const person_idx_r4 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"id\", person_r3.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(person_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.isEditable[person_idx_r4] ? \"d-none\" : \"d-block\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(person_r3.assigned_org);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.isEditable[person_idx_r4] ? \"d-block\" : \"d-none\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.assigned_orgs);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.quals);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.isEditable[person_idx_r4] ? \"d-none\" : \"d-block\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.isEditable[person_idx_r4] ? \"d-block\" : \"d-none\");\n  }\n}\nexport class PersonnelPageComponent {\n  constructor() {\n    const person_dtos = [{\n      id: 1,\n      name: \"Keeler, Joshua\",\n      assigned_org: \"\",\n      quals: [\"Operations Supervisor\"]\n    }, {\n      id: 2,\n      name: \"Van Epps, Lucas\",\n      assigned_org: \"O\",\n      quals: [\"RSU Controller\", \"RSU Observer\"]\n    }];\n    this.quals = ['Operations Supervisor', 'SOF', 'RSU Controller', 'RSU Observer', 'IPC Pilot', 'FPC Pilot', 'FCF Pilot', 'PIT IP', 'SEFE'];\n    this.qual_options = ['', 'X'];\n    this.persons = person_dtos.map(person_dto => {\n      const mapped_quals = this.quals.map(qual => {\n        if (person_dto.quals.includes(qual)) return 'X';else return '';\n      });\n      const person_view = {\n        id: person_dto.id,\n        name: person_dto.name,\n        assigned_org: person_dto.assigned_org,\n        quals: mapped_quals\n      };\n      return person_view;\n    });\n    this.assigned_orgs = ['M', 'N', 'O', 'P', 'X'];\n    this.isEditable = this.persons.map(() => {\n      return false;\n    });\n  }\n  onEdit(row) {\n    this.isEditable[row] = true;\n  }\n  onSave(row) {\n    this.isEditable[row] = false;\n    console.log('Updating: ' + this.persons[row].name);\n    /*console.log(data);\n    const httpRequest = new XMLHttpRequest();\n    httpRequest.onreadystatechange = () => {\n        if (httpRequest.readyState === XMLHttpRequest.DONE) {\n            if (httpRequest.status === 200) {\n                console.log(\"Data saved\");\n            }\n        }\n    };\n         httpRequest.open('POST', '/personnel/' + data.person_id);\n    httpRequest.setRequestHeader('Content-Type', 'application/json');\n         const csrfToken = Cookies.get('csrftoken');\n    httpRequest.setRequestHeader('X-CSRFToken', csrfToken);\n         httpRequest.send(JSON.stringify(data));*/\n  }\n}\n\nPersonnelPageComponent.ɵfac = function PersonnelPageComponent_Factory(t) {\n  return new (t || PersonnelPageComponent)();\n};\nPersonnelPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PersonnelPageComponent,\n  selectors: [[\"sc-personnel-page\"]],\n  decls: 13,\n  vars: 2,\n  consts: [[1, \"table\", \"table-sm\", \"table-bordered\", \"table-hover\", \"table-striped\"], [\"scope\", \"col\"], [\"scope\", \"col\", \"class\", \"rotate qual_header\", 4, \"ngFor\", \"ngForOf\"], [3, \"id\", 4, \"ngFor\", \"ngForOf\"], [\"scope\", \"col\", 1, \"rotate\", \"qual_header\"], [3, \"id\"], [1, \"cell\", \"org\"], [3, \"ngClass\"], [1, \"form-select\", 3, \"ngClass\"], [3, \"selected\", \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"cell qual\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"edit-btn\", \"btn\", \"btn-outline-secondary\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-pencil-fill\"], [\"d\", \"M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-danger\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-trash-fill\"], [\"d\", \"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\"], [\"type\", \"button\", 1, \"save-btn\", \"btn\", \"btn-primary\", 3, \"click\"], [3, \"selected\", \"value\"], [1, \"cell\", \"qual\"]],\n  template: function PersonnelPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"Personnel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"table\", 0)(3, \"thead\")(4, \"th\", 1);\n      i0.ɵɵtext(5, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"th\", 1);\n      i0.ɵɵtext(7, \"Assigned Flight\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(8, PersonnelPageComponent_th_8_Template, 2, 1, \"th\", 2);\n      i0.ɵɵelementStart(9, \"th\");\n      i0.ɵɵtext(10, \"Options\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"tbody\");\n      i0.ɵɵtemplate(12, PersonnelPageComponent_tr_12_Template, 20, 9, \"tr\", 3);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.quals);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.persons);\n    }\n  },\n  dependencies: [i1.NgClass, i1.NgForOf],\n  styles: [\"th.rotate[_ngcontent-%COMP%] {\\n    max-width: 1.5em;\\n    min-width: 1.5em;\\n    writing-mode: vertical-rl;\\n}\\n\\n.qual[_ngcontent-%COMP%] {\\n    max-width: 1.5em;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGVyc29ubmVsL3BlcnNvbm5lbC1wYWdlL3BlcnNvbm5lbC1wYWdlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxnQkFBZ0I7SUFDaEIsZ0JBQWdCO0lBQ2hCLHlCQUF5QjtBQUM3Qjs7QUFFQTtJQUNJLGdCQUFnQjtBQUNwQiIsInNvdXJjZXNDb250ZW50IjpbInRoLnJvdGF0ZSB7XG4gICAgbWF4LXdpZHRoOiAxLjVlbTtcbiAgICBtaW4td2lkdGg6IDEuNWVtO1xuICAgIHdyaXRpbmctbW9kZTogdmVydGljYWwtcmw7XG59XG5cbi5xdWFsIHtcbiAgICBtYXgtd2lkdGg6IDEuNWVtO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","PersonnelPageComponent","constructor","person_dtos","id","name","assigned_org","quals","qual_options","persons","map","person_dto","mapped_quals","qual","includes","person_view","assigned_orgs","isEditable","onEdit","row","onSave","console","log","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/keelerjr/dev/sparkcell-autoscheduler/web/src/app/personnel/personnel-page/personnel-page.component.html","/home/keelerjr/dev/sparkcell-autoscheduler/web/src/app/personnel/personnel-page/personnel-page.component.ts"],"sourcesContent":["<h1>Personnel</h1>\n<table class=\"table table-sm table-bordered table-hover table-striped\">\n    <thead>\n        <th scope=\"col\">Name</th>\n        <th scope=\"col\">Assigned Flight</th>\n        <th *ngFor=\"let qual of quals\" scope=\"col\" class=\"rotate qual_header\">{{ qual }}</th>\n       <!-- <th scope=\"col\" class=\"rotate qual_header\">Operations Supervisor</th>\n        <th scope=\"col\" class=\"rotate qual_header\">SOF</th>\n        <th scope=\"col\" class=\"rotate qual_header\">RSU Controller</th>\n        <th scope=\"col\" class=\"rotate qual_header\">RSU Observer</th>\n        <th scope=\"col\" class=\"rotate qual_header\">IPC Pilot</th>\n        <th scope=\"col\" class=\"rotate qual_header\">FPC Pilot</th>\n        <th scope=\"col\" class=\"rotate qual_header\">FCF Pilot</th>\n        <th scope=\"col\" class=\"rotate qual_header\">PIT IP</th>\n        <th scope=\"col\" class=\"rotate qual_header\">SEFE</th>-->\n        <th>Options</th>\n    </thead>\n    <tbody>\n        <tr *ngFor=\"let person of persons; index as person_idx\" [id]=\"person.id\">\n            <td>{{ person.name }}</td>\n            <td class=\"cell org\">\n                <span [ngClass]=\"isEditable[person_idx] ? 'd-none' : 'd-block'\">{{ person.assigned_org }}</span>\n                <select [ngClass]=\"isEditable[person_idx] ? 'd-block' : 'd-none'\" class=\"form-select\">\n                    <option *ngFor=\"let org of assigned_orgs\" [selected]=\"person.assigned_org == org\" value=\"{{ org }}\">{{ org }}</option>\n                </select>\n            </td>\n            <td *ngFor=\"let qual of quals; index as qual_idx\" class=\"cell qual\">\n                <span [ngClass]=\"isEditable[person_idx] ? 'd-none' : 'd-block'\">{{ person.quals[qual_idx] }}</span>\n                <select [ngClass]=\"isEditable[person_idx] ? 'd-block' : 'd-none'\" class=\"form-select\">\n                    <option *ngFor=\"let qual_opt of qual_options\" [selected]=\"person.quals[qual_idx] == qual_opt\" value=\"{{ qual_opt }}\">{{ qual_opt }}</option>\n                </select>\n            </td>\n            <td>\n                <span [ngClass]=\"isEditable[person_idx] ? 'd-none' : 'd-block'\">\n                    <button type=\"button\" class=\"edit-btn btn btn-outline-secondary\" (click)=\"onEdit(person_idx)\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-pencil-fill\" viewBox=\"0 0 16 16\">\n                            <path d=\"M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z\"/>\n                        </svg>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-outline-danger\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash-fill\" viewBox=\"0 0 16 16\">\n                            <path d=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\"/>\n                        </svg>\n                    </button>\n                </span>\n                <span [ngClass]=\"isEditable[person_idx] ? 'd-block' : 'd-none'\">\n                    <button type=\"button\" class=\"save-btn btn btn-primary\" (click)=\"onSave(person_idx)\">Save</button>\n                </span>\n            </td>\n        </tr>\n    </tbody>\n</table>\n","import { Component } from '@angular/core';\nimport { Person } from '../../core/models/person.model'\nimport { PersonView } from '../shared/personview.model';\n\n@Component({\n  selector: 'sc-personnel-page',\n  templateUrl: './personnel-page.component.html',\n  styleUrls: ['./personnel-page.component.css']\n})\nexport class PersonnelPageComponent {\n  persons: PersonView[];\n  assigned_orgs: string[];\n  quals: string[];\n  qual_options: string[];\n  isEditable: boolean[];\n\n  constructor() {\n    const person_dtos: Person[] = [\n      {\n        id: 1,\n        name: \"Keeler, Joshua\",\n        assigned_org: \"\",\n        quals: [\"Operations Supervisor\"]\n      },\n      {\n        id: 2,\n        name: \"Van Epps, Lucas\",\n        assigned_org: \"O\",\n        quals: [\"RSU Controller\", \"RSU Observer\"]\n      }\n    ]\n\n    this.quals = [\n      'Operations Supervisor', 'SOF', 'RSU Controller', 'RSU Observer', 'IPC Pilot', 'FPC Pilot', 'FCF Pilot', 'PIT IP', 'SEFE'\n    ];\n\n    this.qual_options = ['', 'X']\n\n    this.persons = person_dtos.map(person_dto => {\n      const mapped_quals = this.quals.map(qual => {\n        if (person_dto.quals.includes(qual))\n          return 'X'\n        else\n          return ''\n      });\n\n      const person_view: PersonView = {\n        id: person_dto.id,\n        name: person_dto.name,\n        assigned_org: person_dto.assigned_org,\n        quals: mapped_quals\n      };\n\n      return person_view;\n    });\n\n    this.assigned_orgs = [\n      'M', 'N', 'O', 'P', 'X'\n    ];\n\n    this.isEditable = this.persons.map(() => {\n      return false;\n    })\n  }\n\n  onEdit(row: number) {\n    this.isEditable[row] = true;\n  }\n\n  onSave(row: number) {\n    this.isEditable[row] = false;\n    console.log('Updating: ' + this.persons[row].name);\n\n    /*console.log(data);\n    const httpRequest = new XMLHttpRequest();\n    httpRequest.onreadystatechange = () => {\n        if (httpRequest.readyState === XMLHttpRequest.DONE) {\n            if (httpRequest.status === 200) {\n                console.log(\"Data saved\");\n            }\n        }\n    };\n\n    httpRequest.open('POST', '/personnel/' + data.person_id);\n    httpRequest.setRequestHeader('Content-Type', 'application/json');\n\n    const csrfToken = Cookies.get('csrftoken');\n    httpRequest.setRequestHeader('X-CSRFToken', csrfToken);\n\n    httpRequest.send(JSON.stringify(data));*/\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}